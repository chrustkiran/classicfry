(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{1968:function(e,s,r){Promise.resolve().then(r.bind(r,6203))},6203:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return j}});var a=r(7437),t=r(310);r(6771);var i=r(7021),n=r(935);r(7138);var o=r(3537),l=r(7345),c=r(2265),d=r(6732),u=r(6206),m=r(6463);class h{constructor(e,s,r,a,t){this.userId=e,this.payment={type:r,amount:a},this.paymentIntentId=t,this.orderItems=[],s&&s.length>0&&(this.orderItems=s.map(e=>{let s={quantity:e.quantity,portionSize:e.size};return e.type===d.Z.ITEM_TYPE.ITEM&&(s.item={itemId:e.itemId}),e.type===d.Z.ITEM_TYPE.DEAL&&(s.deal={dealId:e.itemId}),s}))}}var p=e=>new Promise((s,r)=>{fetch("".concat(d.Z.API_URL_STRIPE,"/api/v1/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>s(e.json())).catch(e=>{console.error("Error fetching create order:",e),r(e)})}),x={confirmPayment:e=>new Promise((s,r)=>{fetch("".concat(d.Z.API_URL_STRIPE,"/api/v1/payment/confirm-payment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>s(e.json())).catch(e=>{console.error("Error fetching confirm payment:",e),r(e)})})};d.Z.USER_ID;let f="We're really sorry, there is a problem in creating an online payment for you...",v=e=>{let{amount:s,userId:r,handlePaymentIntent:t,handleSetStripeErr:i,cart:n}=e,u=(0,o.J)(d.Z.stripeAPIKey),[m,x]=(0,c.useState)(null),[v,j]=(0,c.useState)(void 0),y=async(e,s,r)=>{let a=new h(e,s,d.Z.PAYMENT_TYPE.ONLINE,r);await p(a).then(e=>{if(null==e?void 0:e.oderId){var s,r;j(e.orderId),x(null===(s=e.stripeDetails)||void 0===s?void 0:s.clientSecret),t(null===(r=e.stripeDetails)||void 0===r?void 0:r.paymentIntentId)}else i(f)}).catch(e=>{i(f)}),setTimeout(()=>{i(void 0)},8e3)};return(0,c.useEffect)(()=>{null===m&&y(r,n,s)},[]),(0,a.jsxs)("div",{children:[m&&(0,a.jsx)(l.Elements,{stripe:u,options:{clientSecret:m,appearance:{theme:"stripe",variables:{colorPrimary:"#00000",colorBackground:"#ffffff",colorText:"#30313d",colorDanger:"#7d091e"}},loader:"auto"},children:(0,a.jsx)(g,{clientSecret:m,amount:s,handleSetStripeErr:i,orderId:v})}),!m&&(0,a.jsx)("p",{className:"mb-0",children:"Please wait..."})]})},g=e=>{let{amount:s,handleSetStripeErr:r,orderId:t}=e,i=(0,l.useStripe)(),n=(0,l.useElements)(),[o,d]=(0,c.useState)(null),[u,m]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),f=async e=>{if(e.preventDefault(),!i||!n)return;let s=await i.confirmPayment({elements:n,confirmParams:{},redirect:"if_required"});if(s.error)r("Hmm.. Something went wrong! Please check your card details..."),setTimeout(()=>{r(void 0)},8e3);else{var a;x.confirmPayment({paymentIntentId:null==s?void 0:s.paymentIntent.id,orderID:t}).then(e=>{(null==e?void 0:e.orderId)?router.push("/orders?success=true&orderId=".concat(e.orderId)):r("Oops.. we are really sorry, You have completed your payment successfully... but there was an error from ourside, please inform about this at our store, Your Order ID is ".concat(t.substring(0,6)))}).catch(e=>{r("Oops.. we are really sorry, You have completed your payment successfully... but there was an error from ourside, please inform about this at our store, Your Order ID is ".concat(t.substring(0,6)))}),(null===(a=confRes)||void 0===a?void 0:a.order)&&alert("Payment successful! Your order is being processed.")}};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("form",{onSubmit:f,children:[(0,a.jsx)(l.PaymentElement,{options:{layout:"accordion"}}),(0,a.jsx)("button",{disabled:h||!i||!n,id:"submit",className:"mt-3",style:{background:"#ffb936",fontFamily:"Arial, sans-serif",color:"#ffffff",borderRadius:"4px",border:0,padding:"12px 16px",fontSize:"16px",fontWeight:600,cursor:"PointerEvent",display:"block",transition:"all 0.2s ease",boxShadow:"0px 4px 5.5px 0px rgba(0, 0, 0, 0.07)",width:"100%"},children:(0,a.jsx)("span",{id:"button-text",children:h?(0,a.jsx)("div",{className:"spinner",id:"spinner"}):"Pay \xa3".concat(s," now")})})]}),o&&(0,a.jsx)("p",{style:{color:"red"},children:o}),u&&(0,a.jsx)("p",{style:{color:"green"},children:"Payment successful!"})]})};var j=()=>{var e,s,o,l;let{getTotalPrice:x,cart:f}=(0,u.b)(),g=(0,m.useRouter)(),[j,y]=(0,c.useState)(0),b=(null===(s=r.g)||void 0===s?void 0:null===(e=s.window)||void 0===e?void 0:e.localStorage.getItem(d.Z.USER))?JSON.parse(null===(l=r.g)||void 0===l?void 0:null===(o=l.window)||void 0===o?void 0:o.localStorage.getItem(d.Z.USER)):void 0,[N,I]=(0,c.useState)("counter"),[w,S]=(0,c.useState)(!1),[P,E]=(0,c.useState)(void 0),[T,k]=(0,c.useState)(void 0);(0,c.useEffect)(()=>{(null==b?void 0:b.userId)||(console.warn("There is no userId"),g.back())},[]),(0,c.useEffect)(()=>{y(x().toFixed(2))},[x]);let R=async(e,s,r,a)=>{let t=new h(e,s,d.Z.PAYMENT_TYPE.COUNTER,r,a);await p(t).then(e=>{(null==e?void 0:e.oderId)?g.push("/orders?success=true&orderId=".concat(e.orderId)):S(!0)}).catch(e=>{S(!0)}),setTimeout(()=>{S(!1)},8e3)};return(0,a.jsxs)(n.default,{children:[(0,a.jsx)(i.Z,{pageName:"CHECKOUT"}),(null==b?void 0:b.userId)&&(0,a.jsx)("section",{className:"checkout-section fix section-padding border-bottom",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("ul",{className:"list-group px-4",children:[w&&(0,a.jsx)("p",{className:"p-4 error-dial",children:"There is something wrong with the Order, Please try again."}),P&&(0,a.jsx)("p",{className:"p-4 error-dial",children:P}),(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsxs)("div",{className:"custom-control cash-radio custom-radio d-flex gap-3",children:[(0,a.jsx)("input",{type:"radio",id:"cashRadioCounter",name:"cashRadio",className:"custom-control-input",checked:"counter"===N,onChange:()=>I("counter")}),(0,a.jsxs)("label",{className:"custom-control-label",htmlFor:"cashRadioCounter",children:[(0,a.jsx)("i",{className:"fas fa-chalkboard-teacher"}),"\xa0\xa0 I want to pay at the counter"]})]}),"counter"===N&&(0,a.jsx)("div",{className:"mt-3 p-3 border rounded bg-light",children:(0,a.jsxs)("p",{className:"mb-0",children:["You have selected to pay at the counter. Please make sure to pay ",(0,a.jsxs)("strong",{children:["\xa3",j]})," by using card or cash."]})})]}),(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsxs)("div",{className:"custom-control cash-radio custom-radio d-flex gap-3",children:[(0,a.jsx)("input",{type:"radio",id:"cashRadioOnline",name:"cashRadio",className:"custom-control-input",checked:"online"===N,onChange:()=>I("online")}),(0,a.jsxs)("label",{className:"form-check-label",htmlFor:"cashRadioOnline",children:[(0,a.jsx)("i",{className:"fas fa-computer-classic"}),"\xa0\xa0 I can pay online"]})]}),"online"===N&&(0,a.jsx)("div",{className:"mt-3 p-3 border rounded bg-light",children:(0,a.jsx)(v,{amount:j,userId:null==b?void 0:b.userId,handlePaymentIntent:e=>{k(e)},handleSetStripeErr:e=>{E(e)},cart:f})})]}),"counter"===N&&(0,a.jsx)("button",{onClick:()=>R(null==b?void 0:b.userId,f,j,T),id:"submit",className:"mt-3 btn btn-warning text-white fw-bold w-100",style:{borderRadius:"4px",padding:"12px 16px",fontSize:"16px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0px 4px 5.5px 0px rgba(0, 0, 0, 0.07)"},children:(0,a.jsx)("span",{id:"button-text",children:"Confirm your order"})})]})})})})}),!(null==b?void 0:b.userId)&&(0,a.jsx)("p",{children:"Loading..."}),(0,a.jsx)(t.Z,{})]})}},310:function(e,s,r){"use strict";var a=r(7437);s.Z=()=>(0,a.jsxs)("section",{className:"main-cta-banner-2 section-padding bg-cover",style:{backgroundImage:'url("assets/img/hero/hero-bg.jpg")'},children:[(0,a.jsx)("div",{className:"tomato-shape-left float-bob-y",children:(0,a.jsx)("img",{src:"assets/img/tomato.png",alt:"shape-img"})}),(0,a.jsx)("div",{className:"chili-shape-right float-bob-y",children:(0,a.jsx)("img",{src:"assets/img/chilli.png",alt:"shape-img"})}),(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"main-cta-banner-wrapper-2 d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("div",{className:"section-title mb-0",children:[(0,a.jsx)("span",{className:"theme-color-3 wow fadeInUp",children:"Your Perfect Bite, Every Time."}),(0,a.jsxs)("h2",{className:"text-white wow fadeInUp","data-wow-delay":".3s",children:["Try our zesty, fiery  ",(0,a.jsx)("span",{className:"theme-color-3",children:"chicken fries "}),(0,a.jsx)("br",{})," for a flavor-packed kick!"]})]}),(0,a.jsx)("div",{className:"delivery-man",children:(0,a.jsx)("img",{src:"assets/img/delivery-man-2.png",alt:"img"})})]})})]})},6771:function(e,s,r){"use strict";var a=r(7437),t=r(2265);s.default=e=>{let{option:s=[{id:1,name:"Price",value:"price-1"},{id:2,name:"Price",value:"price-2"},{id:3,name:"Price",value:"price-3"},{id:4,name:"Price",value:"price-4"}],className:r=""}=e,[i,n]=(0,t.useState)(!1),[o,l]=(0,t.useState)(s[0]);return(0,a.jsxs)("div",{className:"nice-select ".concat(r," ").concat(i?"open":""),onClick:()=>n(!i),children:[(0,a.jsx)("span",{className:"current",children:o.name}),(0,a.jsx)("ul",{className:"list",children:s.map(e=>(0,a.jsx)("li",{"data-value":e.value,className:"option ".concat(e.id===o.id?"selected":""),onClick:()=>{l(e),n(!1)},children:e.name},e.id))})]})}},7021:function(e,s,r){"use strict";var a=r(7437),t=r(7138);s.Z=e=>{let{pageName:s}=e;return(0,a.jsx)("div",{className:"breadcrumb-wrapper bg-cover",style:{backgroundImage:'url("assets/img/hero/hero-bg.jpg")'},children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"page-heading center",children:[(0,a.jsx)("h1",{children:s}),(0,a.jsxs)("ul",{className:"breadcrumb-items",children:[(0,a.jsx)("li",{children:(0,a.jsx)(t.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)("i",{className:"far fa-chevron-right"})}),(0,a.jsx)("li",{children:s})]})]})})})}}},function(e){e.O(0,[1015,7627,935,2971,7023,1744],function(){return e(e.s=1968)}),_N_E=e.O()}]);